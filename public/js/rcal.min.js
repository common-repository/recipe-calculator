//rcal js
function RecipeCalculator(){function l(f,a){var b=1,d=0,c=0,g=1,k=f;do var e=Math.floor(k),h=b,b=e*b+d,d=h,h=c,c=e*c+g,g=h,k=1/(k-e);while(Math.abs(f-b/c)>1E-6*f);return a?"<span class='numerator'>"+b+"</span>/<span class='denominator'>"+c+"</span>":b+"/"+c}jQuery.each(jQuery(".quantity"),function(){var f=jQuery(this),a=parseFloat(f.text()).toFixed(2),b=parseInt(jQuery(".portions-num").text(),10);f.attr("data-per-portion",a/b)});var m=function(f){jQuery.each(jQuery(".recipe-ingredients"),function(){var a=
jQuery(this);var b=jQuery(this).find("p");var d=parseFloat(a.find(".quantity").data("per-portion")),d=f*d,c=a.find(".quantity-unit").html(),g=d.toFixed(),k=d.toFixed(1);"ml"==c||"g"==c?a.addClass("decimal-hundreds"):"lb"!=c&&"lbs"!=c&&"oz"!=c&&"fl oz"!=c&&"pt"!=c&&"qt"!=c||a.addClass("decimal-tens");b.hasClass("plural-name")&&1<d&&""==c?(a.find("p.single-name").hide(),a.find("p.plural-name").show()):(b.hasClass("plural-name")&&1>=d&&""==c&&a.find("p.single-name").show(),a.find("p.plural-name").hide());
"cup"==c&&1<d?a.addClass("plural"):"cups"==c&&2>=d&&a.removeClass("plural");if(a.hasClass("plural")){b=a.find(".quantity-unit");for(var e=0;e<b.length;e++)b[e].innerText="cups"}if("cups"==c&&1>=d)for(b=a.find(".quantity-unit"),e=0;e<b.length;e++)b[e].innerText="cup";"ml"==c&&1E3<=d?a.addClass("litter"):"L"==c&&999>=d&&a.removeClass("litter");if(a.hasClass("litter"))for(b=a.find(".quantity-unit"),e=0;e<b.length;e++){b[e].innerText="L";var h=d/1E3;quantityLitters=0==h%1?h.toFixed():h.toFixed(1)}if("L"==
c&&999>=d)for(b=a.find(".quantity-unit"),e=0;e<b.length;e++)b[e].innerText="ml";"g"==c&&1E3<=d?a.addClass("kilo"):"kg"==c&&999>=d&&a.removeClass("kilo");if(a.hasClass("kilo"))for(b=a.find(".quantity-unit"),e=0;e<b.length;e++)b[e].innerText="kg",h=d/1E3,quantityKilograms=0==h%1?h.toFixed():h.toFixed(1);if("kg"==c&&999>=d)for(b=a.find(".quantity-unit"),e=0;e<b.length;e++)b[e].innerText="g";0!==d%1&&(d.toFixed(2),c=Math.floor(d),d=0===c?l(d-c,!0):c.toString()+" "+l(d-c,!0));a.find(".quantity").html(d);
a.hasClass("decimal-hundreds")&&a.find(".quantity").html(g);0!==d%1&&a.hasClass("decimal-tens")&&a.find(".quantity").html(k);a.hasClass("litter")&&a.find(".quantity").html(quantityLitters);a.hasClass("kilo")&&a.find(".quantity").html(quantityKilograms);a.hasClass("litar")&&a.find(".quantity").html(quantityLitar);a.hasClass("kilogram")&&a.find(".quantity").html(quantityKilogramsCyrilic)})};jQuery(".control-ingredients button").click(function(){var f=jQuery(".portions-num"),a=parseInt(f.text(),10),
b="",d=jQuery("span.portions-text-single").text(),c=jQuery("span.portions-text-plural").text();if(jQuery(this).hasClass("up")){var g=a+1;if(1E3<g)return!1}else if(jQuery(this).hasClass("down")&&(g=a-1,1>g))return!1;1===g&&(b=d);1<g&&(b=c);jQuery(".portions-text").text(b);f.text(g);m(g)});m(parseInt(jQuery(".portions-num").text(),10));jQuery.each(jQuery(".quantity-unit"),function(){""==jQuery(this).html()&&jQuery(this).hide()});jQuery.each(jQuery(".recipe-ingredients"),function(){var f=jQuery(this);
f.on("click",function(){f.hasClass("checked-ingredients")?jQuery(this).removeClass("checked-ingredients"):jQuery(this).addClass("checked-ingredients")})});var n=jQuery(".rcal-wrap").outerWidth(),p=jQuery(".ingredients"),q=jQuery(".instructions");800>=n&&(p.css("width","100%"),q.css("width","100%"))}jQuery(document).ready(function(){RecipeCalculator()});jQuery(document).ajaxComplete(function(){RecipeCalculator()});